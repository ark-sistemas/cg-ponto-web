<?xml version="1.0" encoding="utf-8" ?>
<ui:composition template="template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	<ui:define name="corpo">
		<script type="text/javascript"> 
	$(document).ready(
        function() {
            PrimeFaces.locales['pt_BR'] = {
                closeText : 'Fechar',
                prevText : 'Anterior',
                nextText : 'Pr\u00F3ximo',
                currentText : 'Come\u00E7o',
                monthNames : [ 'Janeiro', 'Fevereiro', 'Mar\u00E7o', 'Abril',
                        'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro',
                        'Outubro', 'Novembro', 'Dezembro' ],
                monthNamesShort : [ 'Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun',
                        'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez' ],
                dayNames : [ 'Domingo', 'Segunda', 'Ter\u00E7a', 'Quarta',
                        'Quinta', 'Sexta', 'S\u00E1bado' ],
                dayNamesShort : [ 'Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex',
                        'Sáb' ],
                dayNamesMin : [ 'D', 'S', 'T', 'Q', 'Q', 'S', 'S' ],
                weekHeader : 'Semana',
                firstDay : 1,
                isRTL : false,
                showMonthAfterYear : false,
                yearSuffix : '',
                timeOnlyTitle : 'S\u00F3 Horas',
                timeText : 'Tempo',
                hourText : 'Hora',
                minuteText : 'Minuto',
                secondText : 'Segundo',
                currentText : 'Data Atual',
                ampm : false,
                month : 'M\u00EAs',
                week : 'Semana',
                day : 'Dia',
                allDayText : 'Todo Dia'
            };
        });
	</script>
		<!-- CADASTRO JUSTIFICATIVAS DE ABONO -->
		<p:panel header="Justificativas de Abonos RH" id="panel">
			<h:panelGrid columns="1">
				<h:outputLabel value="Usuario:" />
				<h:outputText value="#{UsuarioLogadoControl.usuario.nome}" />
				<h:outputLabel value="Senha:" />
				<h:outputText value="#{UsuarioLogadoControl.usuario.senha}" />
				<h:outputLabel value="IP:" />
				<h:outputText value="#{UsuarioLogadoControl.ip}" />
				
				<!-- TITULO -->
				<h:outputText value="Título"></h:outputText>
				<p:inputText id="titulo"
					value="#{JustificativaAbonoControl.justificativaAbono.titulo}"
					maxlength="50" required="false"
					requiredMessage="Campo Título deve ser preenchido."></p:inputText>
				<!-- DESCRICAO -->
				<h:outputText value="Descrição"></h:outputText>
				<p:inputTextarea id="descricao" rows="10" cols="50"
					value="#{JustificativaAbonoControl.justificativaAbono.descricao}"
					maxlength="254" required="false"
					requiredMessage="Campo Título deve ser preenchido."></p:inputTextarea>

				<!-- ANEXO DE DOCUMENTO -->
				<h:outputText value="Anexar Documentos" for="anexo" />
				<h:inputFile id="anexo" value="#{JustificativaAbonoControl.arquivo}"></h:inputFile>
				
				<!-- HORAS DIARIA INICIO -->
				<h:outputText value="Hora Inicio"></h:outputText>
				<p:inputMask id="hInicio"
					value="#{JustificativaAbonoControl.justificativaAbono.horasDiariaInicio}"
					mask="99:99" required="false"
					requiredMessage="Campo Título deve ser preenchido."></p:inputMask>
				<!-- HORAS DIARIA TERMINO -->
				<h:outputText value="Hora Término"></h:outputText>
				<p:inputMask id="hTermino"
					value="#{JustificativaAbonoControl.justificativaAbono.horasDiariaTermino}"
					mask="99:99" required="false"
					requiredMessage="Campo Título deve ser preenchido."></p:inputMask>
				
				<!-- DATA DE INICIO -->
				<h:outputText for="dtInicioO" value="Data Inicio"></h:outputText>
				<p:calendar id="dtInicioO" value="#{JustificativaAbonoControl.justificativaAbono.dataInicio}" locale="pt_BR"
					navigator="true" maxlength="8" required="true" mask="99/99/9999" maskAutoClear="true" pattern="dd/MM/yyyy"/>
				
				<!-- DATA TERMINO -->
				<h:outputText for="dtTermino" value="Data Termino"></h:outputText>
				<p:calendar id="dtTermino" value="#{JustificativaAbonoControl.justificativaAbono.dataTermino}" locale="pt_BR"
					navigator="true" maxlength="8" required="true" mask="99/99/9999" maskAutoClear="true" pattern="dd/MM/yyyy"/>
				
				
				<!-- STATUS -->
				<p:outputLabel for="status" value="Status:" />
				<p:selectOneMenu id="status"
					value="#{JustificativaAbonoControl.justificativaAbono.status}">
					<f:selectItem itemLabel="Selecione" itemValue="Recusado" />
					<f:selectItem itemLabel="Aceito" itemValue="Aceito" />
					<f:selectItem itemLabel="Recusado" itemValue="Recusado" />
				</p:selectOneMenu>

				<!-- BOTAO ADICIONAR -->
				<p:commandButton id="addJustificativa"
					actionListener="#{JustificativaAbonoControl.alterar }"
					value="Submit" ajax="false" update="justificativaAbono, panel"></p:commandButton>
			</h:panelGrid>
		</p:panel>


		<!-- TABELA DE JUSTIFICATIVAS DE ABONO -->
		<p:dataTable id="justificativaAbono" var="abono"
			value="#{JustificativaAbonoControl.justificativaAbonos}"
			selectionMode="single"
			selection="#{JustificativaAbonoControl.justificativaAbono}"
			rowKey="#{abono.idJustificativa}" width="100%" emptyMessage="Sem registros">
			<f:facet name="header">
				<h:outputText value="Lista de Justificativas de Abono"></h:outputText>
			</f:facet>
			<p:ajax event="rowSelect"
				listener="#{JustificativaAbonoControl.onRowSelect}"
				update=":formCorpo:panel" />
			<p:ajax event="rowUnselect"
				listener="#{JustificativaAbonoControl.onRowUnselect}"
				update=":formCorpo:panel " />
			<!-- ID -->
			<p:column sortBy="#{abono.idJustificativa}">
				<f:facet name="header">
					<h:outputText value="ID"></h:outputText>
				</f:facet>
				<h:outputText value="#{abono.idJustificativa}"></h:outputText>
			</p:column>
			<!-- TITULO -->
			<p:column sortBy="#{abono.titulo}">
				<f:facet name="header">
					<h:outputText value="Título"></h:outputText>
				</f:facet>
				<h:outputText value="#{abono.titulo}"></h:outputText>
			</p:column>
			<!-- DESCRICAO -->
			<p:column sortBy="#{abono.descricao}">
				<f:facet name="header">
					<h:outputText value="Descrição"></h:outputText>
				</f:facet>
				<h:outputText value="#{abono.descricao}"></h:outputText>
			</p:column>
			<!-- ANEXO DE DOCUMENTO -->
			<p:column sortBy="#{abono.anexoDocumento}">
				<f:facet name="header">
					<h:outputText value="Anexos"></h:outputText>
				</f:facet>
				<h:outputText value="#{abono.anexoDocumento}"></h:outputText>
			</p:column>
			<!-- HORA DIARIA INICIO -->
			<p:column sortBy="#{abono.horasDiariaInicio}">
				<f:facet name="header">
					<h:outputText value="Hora Início"></h:outputText>
				</f:facet>
				<h:outputText value="#{abono.horasDiariaInicio}"></h:outputText>
			</p:column>
			<!-- HORA DIARIA TERMINO -->
			<p:column sortBy="#{abono.horasDiariaTermino}">
				<f:facet name="header">
					<h:outputText value="Hora Término"></h:outputText>
				</f:facet>
				<h:outputText value="#{abono.horasDiariaTermino}"></h:outputText>
			</p:column>
			<!-- DATA INICIO -->
			<p:column sortBy="#{abono.dataInicio}">
				<f:facet name="header">
					<h:outputText value="Data de Inicio"></h:outputText>
				</f:facet>
				<h:outputText value="#{abono.dataInicio}"></h:outputText>
			</p:column>
			<!-- DATA TERMINO -->
			<p:column sortBy="#{abono.dataTermino}">
				<f:facet name="header">
					<h:outputText value="Data de Termino"></h:outputText>
				</f:facet>
				<h:outputText value="#{abono.dataTermino}"></h:outputText>
			</p:column>
			<!-- STATUS -->
			<p:column sortBy="#{abono.status}">
				<f:facet name="header">
					<h:outputText value="Status"></h:outputText>
				</f:facet>
				<h:outputText value="#{abono.status}"></h:outputText>
			</p:column>
			<!-- USUARIO LOGADO -->
			<p:column>
				<f:facet name="header">
					<h:outputText value="Download"></h:outputText>
				</f:facet>
				<h:commandLink immediate="true"
					actionListener="#{JustificativaAbonoControl.download(abono)}"
					value="Download">
					<f:param name="fileDownloadId"
						value="#{JustificativaAbonoControl.justificativaAbono}" />
				</h:commandLink>
				<h:outputText value="#{abono.usuarioLogado.login}"></h:outputText>
			</p:column>
			<p:column>
				<f:facet name="header">
					<h:outputText value="Usuario"></h:outputText>
				</f:facet>
				<h:outputText value="#{abono.usuarioLogado.login}"></h:outputText>
			</p:column>

			<p:column>
				<f:facet name="header">
				</f:facet>
				<p:commandButton
					actionListener="#{JustificativaAbonoControl.excluir(abono) }"
					value="Excluir" process="@this" update=":formCorpo:justificativaAbono "></p:commandButton>
			</p:column>

		</p:dataTable>

		<!-- BOTAO VOLTAR -->
		<!-- <a href="inicio.jspx">Voltar ao inicio</a> -->
	</ui:define>
</ui:composition>